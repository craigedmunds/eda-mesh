version: '3'

tasks:
  test:ingress:kustomize:
    desc: Run platform ingress kustomize build tests
    dir: ../tests/kustomize
    cmds:
      - cmd: echo "ðŸ§ª Running platform ingress kustomize tests..."
        silent: true
      - source venv/bin/activate && python3 -m pytest test_argocd_ingress.py test_kargo_ingress.py -v --tb=short
      - cmd: echo "âœ… Platform ingress tests passed"
        silent: true

  test:ingress:kustomize:argocd:
    desc: Run ArgoCD ingress build tests
    dir: ../tests/kustomize
    cmds:
      - cmd: echo "ðŸ§ª Running ArgoCD ingress tests..."
        silent: true
      - source venv/bin/activate && python3 -m pytest test_argocd_ingress.py -v --tb=short -m argocd
      - cmd: echo "âœ… ArgoCD ingress tests passed"
        silent: true

  test:ingress:kustomize:kargo:
    desc: Run Kargo ingress build tests
    dir: ../tests/kustomize
    cmds:
      - cmd: echo "ðŸ§ª Running Kargo ingress tests..."
        silent: true
      - source venv/bin/activate && python3 -m pytest test_kargo_ingress.py -v --tb=short -m kargo
      - cmd: echo "âœ… Kargo ingress tests passed"
        silent: true